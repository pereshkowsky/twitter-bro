<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twitter Claude Reply Generator</title>
  <style>
    body {
      width: 400px;
      min-height: 500px;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background-color: #15202b;
      color: #ffffff;
    }
    
    .container {
      padding: 20px;
    }
    
    h1 {
      font-size: 10px;
      font-weight: 600;
      margin: 0 0 20px 0;
      color: #1DA1F2;
      display: flex;
      align-items: center;
      gap: 5px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-size: 14px;
      color: #8899a6;
    }
    
    input, select, textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #38444d;
      border-radius: 4px;
      background-color: #192734;
      color: #ffffff;
      font-size: 14px;
      box-sizing: border-box;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #1DA1F2;
    }
    
    textarea {
      resize: vertical;
      min-height: 80px;
    }
    
    #replyText {
      min-height: 120px;
      background-color: #253341;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    button {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .btn-primary {
      background-color: #1DA1F2;
      color: white;
    }
    
    .btn-primary:hover:not(:disabled) {
      background-color: #1a91da;
    }
    
    .btn-success {
      background-color: #17BF63;
      color: white;
    }
    
    .btn-success:hover:not(:disabled) {
      background-color: #15a857;
    }
    
    .btn-warning {
      background-color: #ff9800;
      color: white;
    }
    
    .btn-warning:hover:not(:disabled) {
      background-color: #e68900;
    }
    
    .btn-danger {
      background-color: #e0245e;
      color: white;
    }
    
    .btn-danger:hover:not(:disabled) {
      background-color: #c91e52;
    }
    
    .btn-small {
      padding: 6px 12px;
      font-size: 12px;
    }
    
    .cache-status {
      margin-top: 10px;
      padding: 10px;
      border-radius: 4px;
      font-size: 13px;
      text-align: center;
    }
    
    .cache-status.active {
      background-color: #17BF63;
      color: white;
    }
    
    .cache-status.inactive {
      background-color: #38444d;
      color: #8899a6;
    }
    
    .tweet-context {
      margin-top: 15px;
      padding: 10px;
      background-color: #192734;
      border-radius: 4px;
      font-size: 13px;
      color: #8899a6;
    }
    
    .tweet-context strong {
      color: #1DA1F2;
    }
    
    .model-info {
      font-size: 11px;
      color: #8899a6;
      margin-top: 3px;
    }
    
    .status-message {
      margin-top: 10px;
      padding: 10px;
      border-radius: 4px;
      font-size: 13px;
      text-align: center;
    }
    
    .status-success {
      background-color: #17BF63;
      color: white;
    }
    
    .status-error {
      background-color: #e0245e;
      color: white;
    }
    
    .status-info {
      background-color: #1DA1F2;
      color: white;
    }
    
    #saveSettingsBtn {
      width: 100%;
    }
    
    #imageStatus {
      background-color: rgba(23, 191, 99, 0.15);
      padding: 10px 12px;
      border-radius: 6px;
      border: 1px solid rgba(23, 191, 99, 0.4);
      font-weight: 500;
      animation: fadeIn 0.5s ease-in;
      box-shadow: 0 2px 8px rgba(23, 191, 99, 0.2);
      margin-top: 10px;
      text-align: center;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-5px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(100%);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes fadeOut {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ü§ñ Twitter Claude Reply Generator</h1>
    
    <div class="form-group">
      <label for="apiKey">Anthropic API Key</label>
      <input type="password" id="apiKey" placeholder="sk-ant-api...">
    </div>
    
    <div class="form-group">
      <label for="model">Claude Model</label>
      <select id="model">
        <option value="claude-3-haiku-20240307">Haiku 3.5 (Fast, Text only)</option>
        <option value="claude-3-5-sonnet-20241022">Sonnet 3.5 (Balanced + Images)</option>
        <option value="claude-sonnet-4-20250514" selected>Sonnet 4 (Best + Images)</option>
      </select>
      <div class="model-info" id="modelInfo">Supports text and images</div>
    </div>
    
    <div class="form-group" style="margin-top: 15px;">
      <label style="display: flex; align-items: center; gap: 8px;">
        <input type="checkbox" id="hideReposts" style="width: auto; margin: 0;">
        <span>Hide repost buttons</span>
      </label>
      <label style="display: flex; align-items: center; gap: 8px; margin-top: 8px;">
        <input type="checkbox" id="dimReposts" checked style="width: auto; margin: 0;">
        <span>Highlight reposts in red</span>
      </label>
    </div>

    <div class="form-group">
      <label for="prompt">System Prompt</label>
      <textarea id="prompt" placeholder="Enter your custom prompt...">You are a helpful AI assistant that generates thoughtful, engaging replies to tweets. Be concise, relevant, and match the tone of the conversation.</textarea>
    </div>
    
    <div class="button-group">
      <button id="saveSettingsBtn" class="btn-primary">Save Settings</button>
    </div>
    
    <div class="button-group" style="margin-top: 10px;">
      <button id="cachePromptBtn" class="btn-success btn-small">Cache This Prompt</button>
      <button id="clearCacheBtn" class="btn-danger btn-small">Clear Cache</button>
    </div>
    
    <div id="cacheStatus" class="cache-status inactive">
      Cache inactive
    </div>
    
    <div id="tweetContext" class="tweet-context" style="display: none;">
      <strong>Last tweet from @<span id="tweetAuthor"></span>:</strong>
      <div id="tweetText"></div>
    </div>
    
    <div class="form-group">
      <label for="replyText">Generated Reply</label>
      <div id="processingStatus" style="display: none; margin-bottom: 10px; color: #1DA1F2; font-size: 13px;">
        ‚è≥ Processing tweet with images...
      </div>
      <textarea id="replyText" readonly placeholder="Generated reply will appear here..."></textarea>
      <div id="imageStatus" class="model-info" style="display: none; margin-top: 8px;"></div>
    </div>
    
    <div class="button-group">
      <button id="copyBtn" class="btn-success" disabled>Copy Reply</button>
      <button id="regenerateBtn" class="btn-warning" disabled>Regenerate</button>
    </div>
    
    <div id="statusMessage" style="display: none;"></div>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>